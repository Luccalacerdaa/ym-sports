/* Estilos para garantir que a barra inferior esteja sempre visível */
:root {
  --app-height: 100vh;
}

html, body {
  height: var(--app-height);
  overflow-x: hidden !important; /* Previne scroll horizontal */
  position: relative !important;
  overscroll-behavior-y: none !important; /* Previne scroll elástico que pode causar problemas */
}

body {
  padding-bottom: env(safe-area-inset-bottom, 80px) !important;
  -webkit-touch-callout: none !important; /* Previne menu de contexto */
  touch-action: manipulation !important; /* Otimiza para toque */
}

/* Corrigir problemas com inputs de data em dispositivos móveis */
input[type="date"],
input[type="time"],
input[type="datetime-local"],
input[type="text"],
input[type="email"],
input[type="password"],
textarea,
select {
  max-width: 100% !important;
  min-height: 44px !important; /* Garantir altura mínima para toque (44px é o recomendado pela Apple) */
  font-size: 16px !important; /* Evita zoom automático em iOS */
  -webkit-appearance: none !important; /* Remover estilo nativo */
  -moz-appearance: none !important;
  appearance: none !important;
  transform: translateZ(0) !important; /* Força aceleração de hardware */
}

/* Garantir que nenhum elemento cubra a barra inferior */
.fixed-bottom-bar {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
  transform: translateZ(0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  height: auto !important; /* Impedir que a altura seja alterada */
  min-height: 60px !important; /* Altura mínima */
  transition: none !important; /* Previne animações que podem causar problemas */
}

/* Garantir que dialogs não afetem a barra inferior */
.dialog-container {
  padding-bottom: 80px !important;
  max-height: 85vh !important; /* Limitar altura máxima */
  overflow-y: auto !important; /* Garantir scroll */
  -webkit-overflow-scrolling: touch !important; /* Scroll suave em iOS */
}

/* Impedir que elementos com z-index alto cubram a barra */
[style*="z-index: 9999"],
[style*="z-index:9999"],
[style*="z-index: 999"],
[style*="z-index:999"] {
  z-index: 998 !important;
}

/* Exceção para a barra inferior */
.bottom-nav-exception {
  z-index: 9999 !important;
}

/* Corrigir problemas de layout após interação com inputs */
html, body {
  height: 100% !important;
  position: relative !important;
}

/* Forçar posição fixa mesmo após interação com inputs */
@media (max-width: 768px) {
  .fixed-bottom-bar {
    position: fixed !important;
    bottom: 0 !important;
    height: 60px !important;
  }
  
  /* Corrigir problema de zoom em inputs */
  input, select, textarea {
    font-size: 16px !important;
  }
  
  /* Garantir que o conteúdo não fique escondido pela barra */
  main {
    padding-bottom: 80px !important;
  }
  
  /* Estilo específico para quando o teclado está aberto */
  body.keyboard-open {
    /* Adicionar padding extra para evitar que o conteúdo fique escondido pelo teclado */
    padding-bottom: 250px !important;
  }
  
  /* Evitar que a barra desapareça quando o teclado está aberto */
  body.keyboard-open .fixed-bottom-bar {
    position: fixed !important;
    bottom: 0 !important;
    z-index: 9999 !important;
  }
  
  /* Melhorar experiência de toque em inputs */
  input, textarea, select {
    padding: 12px !important;
    margin-bottom: 8px !important;
  }
  
  /* Prevenir comportamentos estranhos com inputs */
  input:focus, textarea:focus, select:focus {
    position: relative !important;
    z-index: 1 !important;
  }
}
